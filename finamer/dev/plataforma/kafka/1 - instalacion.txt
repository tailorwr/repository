////////////////////////////////////////////////////////////////
# I N S T A L A C I O N   D E   K A F K A
////////////////////////////////////////////////////////////////

#Deployar Zookeper y Kafka como Statefulsets

kubectl apply -f https://raw.githubusercontent.com/tailorwr/repository/main/finamer/dev/plataforma/kafka/yaml/Kafka_deployment.yml?token=GHSAT0AAAAAACUS75VRX7NEBZOFFRJUUPGEZVFX5RA

#Verificar funcionamiento

kubectl apply -f https://raw.githubusercontent.com/tailorwr/repository/main/finamer/dev/plataforma/kafka/yaml/test-kafka.yml?token=GHSAT0AAAAAACUS75VQEQH6BPI2OE5NIYEMZVFX6BQ


kubectl exec --stdin --tty kcat-59dfc96dd-d6g9f -- /bin/sh 
         
#echo "Test Message" | kcat -P -b kafka:29092 -t testtopic -p -1
#echo "Test Message" | kcat -P -b kafka.kafka.svc.cluster.local:29092 -t testtopic -p -1
kafka.kafka.svc.cluster.local:9092

kcat -C -b kafka.kafka.svc.cluster.local:29092 -t testtopic -p -1



#echo "Test Message" | kcat -P -b kafka.kafka.svc.cluster.local:9092 -t testtopic -p -1
#kcat -C -b kafka.kafka.svc.cluster.local:9092 -t testtopic -p -1
